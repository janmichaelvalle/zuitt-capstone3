{"ast":null,"code":"var _jsxFileName = \"/Users/mikeevalle/Documents/zuiit-2024/B384/individual-valle/capstone3/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport UserContext from '../UserContext';\nimport { Navigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isActive, setIsActive] = useState(true);\n  function authenticate(e) {\n    e.preventDefault();\n    fetch('http://localhost:4000/users/login', {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(res => res.json()).then(data => {\n      if (typeof data.access !== \"undefined\") {\n        localStorage.setItem('token', data.access);\n        retrieveUserDetails(data.access);\n        Swal.fire({\n          title: \"Login Successful\",\n          icon: \"success\",\n          text: \"Welcome to Zuitt!\"\n        });\n      } else if (data.error === \"No Email Found\") {\n        Swal.fire({\n          title: \"Email not found.\",\n          icon: \"error\",\n          text: \"Check the email  you provided.\"\n        });\n      } else {\n        Swal.fire({\n          title: \"Authentication failed\",\n          icon: \"error\",\n          text: \"Check your login details and try again.\"\n        });\n      }\n    });\n    setEmail('');\n    setPassword('');\n  }\n  const retrieveUserDetails = token => {\n    fetch('http://localhost:4000/users/details', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      setUser({\n        id: data.user._id,\n        isAdmin: data.user.isAdmin\n      });\n    });\n  };\n  useEffect(() => {\n    if (email !== '' && password !== '') {\n      setIsActive(true);\n    } else {\n      setIsActive(false);\n    }\n  }, [email, password]);\n  return user.id !== null ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/courses\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: e => authenticate(e),\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-5 text-center\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"userEmail\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Email address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"email\",\n        placeholder: \"Enter email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"password\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }, this), isActive ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      id: \"submitBtn\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      id: \"submitBtn\",\n      disabled: true,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 13\n  }, this);\n}\n_s(Login, \"7LAW4hX7lIO3dHOrzW+aJ8+WrWg=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useEffect","useContext","Form","Button","UserContext","Navigate","Swal","jsxDEV","_jsxDEV","Login","_s","user","setUser","email","setEmail","password","setPassword","isActive","setIsActive","authenticate","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","data","access","localStorage","setItem","retrieveUserDetails","fire","title","icon","text","error","token","Authorization","console","log","id","_id","isAdmin","to","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","children","className","Group","controlId","Label","Control","type","placeholder","value","onChange","target","required","variant","disabled","_c","$RefreshReg$"],"sources":["/Users/mikeevalle/Documents/zuiit-2024/B384/individual-valle/capstone3/src/pages/Login.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport UserContext from '../UserContext';\nimport { Navigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\n\nexport default function Login() {\n\n   \n    const {user, setUser} = useContext(UserContext);\n    \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    \n    const [isActive, setIsActive] = useState(true);\n\n    function authenticate(e) {\n\n        e.preventDefault();\n        fetch('http://localhost:4000/users/login',{\n\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \n            email: email,\n            password: password\n            \n        })\n    })\n    .then(res => res.json())\n    .then(data => {\n\n        if(typeof data.access !== \"undefined\"){\n           \n            localStorage.setItem('token', data.access);\n            retrieveUserDetails(data.access)\n\n            Swal.fire({\n                title: \"Login Successful\",\n                icon: \"success\",\n                text: \"Welcome to Zuitt!\"\n            })\n                        \n        } else if (data.error === \"No Email Found\") {\n\n            Swal.fire({\n                title: \"Email not found.\",\n                icon: \"error\",\n                text: \"Check the email  you provided.\"\n            })\n\n        } else {\n\n            Swal.fire({\n                title: \"Authentication failed\",\n                icon: \"error\",\n                text: \"Check your login details and try again.\"\n            })\n        }\n    })\n    \n   \n    setEmail('');\n    setPassword('');\n\n    }\n\n    const retrieveUserDetails = (token) => {\n        fetch('http://localhost:4000/users/details', {\n            headers: {\n                Authorization: `Bearer ${ token }`\n            }\n        })\n        .then(res => res.json())\n        .then(data => {\n            console.log(data);\n\n           \n            setUser({\n                id: data.user._id,\n                isAdmin: data.user.isAdmin\n            })\n        })\n    };\n\n    useEffect(() => {\n       \n        if(email !== '' && password !== ''){\n            setIsActive(true);\n        }else{\n            setIsActive(false);\n        }\n\n    }, [email, password]);\n\n    \n\n    return (    \n        (user.id !== null) ?\n            <Navigate to=\"/courses\" />\n        :\n            <Form onSubmit={(e) => authenticate(e)}>\n                <h1 className=\"my-5 text-center\">Login</h1>\n                <Form.Group controlId=\"userEmail\">\n                    <Form.Label>Email address</Form.Label>\n                    <Form.Control \n                    type=\"email\" \n                    placeholder=\"Enter email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    required\n                    />\n                </Form.Group>\n\n                <Form.Group controlId=\"password\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control \n                    type=\"password\" \n                    placeholder=\"Password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)} \n                    required\n                    />\n                </Form.Group>\n\n                { isActive ?\n                    <Button variant=\"primary\" type=\"submit\" id=\"submitBtn\">\n                    Submit\n                    </Button>\n                :\n                    <Button variant=\"primary\" type=\"submit\" id=\"submitBtn\" disabled> \n                    Submit\n                    </Button>\n                }\n            </Form>       \n        )\n    }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}