{"ast":null,"code":"var _jsxFileName = \"/Users/mikeevalle/Documents/zuiit-2024/B384/individual-valle/capstone3/src/pages/Login.js\",\n  _s = $RefreshSig$();\nimport { Form, Button, Nav } from \"react-bootstrap\";\nimport { useState, useEffect, useContext } from \"react\";\nimport UserContext from \"../UserContext\";\nimport { Navigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  // Allows to consume User context object and it's properties to use for user validation\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isActive, setIsActive] = useState(false);\n  function loginUser(e) {\n    e.preventDefault();\n    fetch(\"http://localhost:4000/users/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      })\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      if (data.error === \"No Email Found\") {\n        Swal.fire({\n          title: \"Email not found.\",\n          icon: \"error\",\n          text: \"Check the email you provided.\"\n        });\n      } else if (data.message === \"Email and password do not match\") {\n        Swal.fire({\n          title: \"Authentication failed\",\n          icon: \"error\",\n          text: \"Check your login details and try again.\"\n        });\n      } else if (data.error === \"Invalid Email\") {\n        alert(\"Invalid Email\");\n      } else if (typeof data.access !== \"undefined\") {\n        // setUser({access: data.access})\n        /* \n          - Set the email of auth user in local storage\n            - Syntax: locadStorage.setItem('propertyName', value)\n          - The \"locadStoarge.setItem\" allows to manipulate the browswer's localStorage to store information indefinitely to help demonstrate conditional rendering and the login and logout features.\n        */\n        // Storing info in locadStorage will make the data persistent event as the page is refreshed unlike with the use of states where the info is reset ehen refreshing the page. \n        localStorage.setItem(\"token\", data.access);\n        retrieveUserDetails(data.access);\n        Swal.fire({\n          title: \"Login Successful\",\n          icon: \"success\",\n          text: \"Welcome to Zuitt!\"\n        });\n      } else {\n        alert(\"Something went wrong\");\n      }\n    });\n  }\n\n  // Clear input fields\n  // setEmail(\"\");\n  // setPassword(\"\");\n\n  const retrieveUserDetails = token => {\n    fetch(`http://localhost:4000/b5/users/login`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n\n      // \"setUser\" changes the global \"user\" state to store the \"id\" and the \"isAdmin\" property of the user which will be used for validation across the whole application.\n      setUser({\n        id: data.user._id,\n        isAdmin: data.user.isAdmin\n      });\n    });\n  };\n  useEffect(() => {\n    if (email !== \"\" && password !== \"\") {\n      setIsActive(true);\n    } else {\n      setIsActive(false);\n    }\n  }, [email, password]);\n  return user.id !== null ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/courses\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: e => loginUser(e),\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"my-5 text-center\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"email\",\n        placeholder: \"Enter Email\",\n        required: true,\n        value: email,\n        onChange: e => {\n          setEmail(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"password\",\n        placeholder: \"Enter Password\",\n        required: true,\n        value: password,\n        onChange: e => {\n          setPassword(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), isActive ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"success\",\n      type: \"submit\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"disabled\",\n      type: \"submit\",\n      disabled: true,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"6IfuUVQQWYXlQuI3lXoCFlUFBAI=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Form","Button","Nav","useState","useEffect","useContext","UserContext","Navigate","Swal","jsxDEV","_jsxDEV","Login","_s","user","setUser","email","setEmail","password","setPassword","isActive","setIsActive","loginUser","e","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","error","fire","title","icon","text","message","alert","access","localStorage","setItem","retrieveUserDetails","token","Authorization","id","_id","isAdmin","to","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","children","className","Group","Label","Control","type","placeholder","required","value","onChange","target","variant","disabled","_c","$RefreshReg$"],"sources":["/Users/mikeevalle/Documents/zuiit-2024/B384/individual-valle/capstone3/src/pages/Login.js"],"sourcesContent":["import { Form, Button, Nav } from \"react-bootstrap\";\nimport { useState, useEffect, useContext } from \"react\";\nimport UserContext from \"../UserContext\";\nimport { Navigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\n\nexport default function Login(){\n  // Allows to consume User context object and it's properties to use for user validation\n  const {user, setUser} = useContext(UserContext)\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isActive, setIsActive] = useState(false);\n\n  function loginUser(e) {\n    e.preventDefault();\n\n    fetch(\"http://localhost:4000/users/login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: email,\n        password: password\n      }),\n    })\n    .then((res) => res.json())\n    .then((data) => {\n      \n      console.log(data)\n      if (data.error === \"No Email Found\") {\n        \n        Swal.fire({\n          title: \"Email not found.\",\n          icon: \"error\",\n          text: \"Check the email you provided.\"\n        })\n\n      } else if (data.message === \"Email and password do not match\") {\n        Swal.fire({\n          title: \"Authentication failed\",\n          icon: \"error\",\n          text: \"Check your login details and try again.\"\n        })\n\n\n      } else if (data.error === \"Invalid Email\") {\n        alert(\"Invalid Email\")\n      } else if (typeof data.access !== \"undefined\"){\n        // setUser({access: data.access})\n        /* \n          - Set the email of auth user in local storage\n            - Syntax: locadStorage.setItem('propertyName', value)\n          - The \"locadStoarge.setItem\" allows to manipulate the browswer's localStorage to store information indefinitely to help demonstrate conditional rendering and the login and logout features.\n        */\n        // Storing info in locadStorage will make the data persistent event as the page is refreshed unlike with the use of states where the info is reset ehen refreshing the page. \n        localStorage.setItem(\"token\", data.access);\n        retrieveUserDetails(data.access);\n\n        Swal.fire({\n          title: \"Login Successful\",\n          icon: \"success\",\n          text: \"Welcome to Zuitt!\"\n        })\n      } else {\n        alert(\"Something went wrong\")\n      }\n    })\n  }\n\n  // Clear input fields\n  // setEmail(\"\");\n  // setPassword(\"\");\n\n  const retrieveUserDetails = (token) => {\n    fetch(`http://localhost:4000/b5/users/login`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      console.log(data);\n\n      // \"setUser\" changes the global \"user\" state to store the \"id\" and the \"isAdmin\" property of the user which will be used for validation across the whole application.\n      setUser({\n        id: data.user._id,\n        isAdmin: data.user.isAdmin\n      })\n    })\n  }\n\n  useEffect(() => {\n    if (email !== \"\" &&\n    password !== \"\") {\n      setIsActive(true);\n    } else {\n      setIsActive(false)\n    }\n  }, [email,password])\n\n  return (\n    (user.id !== null) ?\n    <Navigate to=\"/courses\" />\n    :\n    <Form onSubmit={(e) => loginUser(e)}>\n      <h1 className=\"my-5 text-center\">Login</h1>\n      <Form.Group>\n        <Form.Label>Email:</Form.Label>\n        <Form.Control\n          type=\"email\"\n          placeholder=\"Enter Email\"\n          required\n          value={email}\n          onChange={(e) => {\n            setEmail(e.target.value);\n          }}\n        />\n      </Form.Group>\n      <Form.Group>\n        <Form.Label>Password:</Form.Label>\n        <Form.Control\n          type=\"password\"\n          placeholder=\"Enter Password\"\n          required\n          value={password}\n          onChange={(e) => {\n            setPassword(e.target.value);\n          }}\n        />\n      </Form.Group>\n      {isActive ? (\n        <Button variant=\"success\" type=\"submit\">\n          Submit\n        </Button>\n      ) : (\n        <Button variant=\"disabled\" type=\"submit\" disabled>\n          Login\n        </Button>\n      )}\n    </Form>\n\n  );\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}